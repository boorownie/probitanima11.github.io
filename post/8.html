<!doctype html>
<html>
<head>
<title>맨땅에 코딩</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="stylesheet" href="/stylesheets/styles.css">
<link rel="stylesheet" href="/stylesheets/pygment_trac.css">
</head>
<body>
	<div class="wrapper">
		<header>
			<h1>맨땅에 코딩</h1>
			<p class="menu">
				<a href="/"> Home </a>
			</p>
			<p class="menu">
				<a href="/list/post.html"> Post </a>
			</p>
			<p class="menu">
				<a href="/list/dairy.html"> Dairy </a>
			</p>
			<p class="menu">
				<a href="https://github.com/probitanima11"> GitHub </a>
			</p>
		</header>
		<section>
			<!-- 상단 뒤로 돌아가기 버튼 -->
			<a class="back_button" href="/list/post.html"> _back </a>
			<!-- 내용 넣기 -->
			<div id="content">
				<h1>JDBC 적용하기</h1>

				<p>
					<code>&gt;컨트롤러에서 데이터베이스에 데이터를 저장하기</code>
				</p>

				<h2>1. h2 dependency 추가(maven)</h2>

				<p>
					<code>&gt;pom.xml</code>
				</p>

				<pre>
<code>&lt;dependency&gt;
    &lt;groupId&gt;com.h2database&lt;/groupId&gt;
    &lt;artifactId&gt;h2&lt;/artifactId&gt;
    &lt;version&gt;1.4.187&lt;/version&gt;
&lt;/dependency&gt;
</code>
				</pre>

				<h2>2. JDBC설정파일 생성</h2>

				<p>데이터베이스에 대한 JDBC설정을 스프링 프레임워크를 통해 따로 관리할 수 있어 기존에 자바소스에서 하던
					작업을 분리 할 수 있다.</p>

				<p>
					<code>&gt;application-properties.xml</code>
				</p>

				<pre>
<code>&lt;entry key="database.driverClassName"&gt;org.h2.Driver&lt;/entry&gt;
&lt;entry key="database.url"&gt;jdbc:h2:~/slipp-user&lt;/enrty&gt;
&lt;entry key="database.username"&gt;sa&lt;/entry&gt;
&lt;entry key="database.password"&gt;&lt;/entry&gt;
</code>
				</pre>

				<h2>3. connection pool 추가(maven)</h2>

				<p>
					<code>&gt;pom.xml</code>
				</p>

				<pre>
<code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;
    &lt;artifactId&gt;dbcp&lt;/artifactId&gt;
    &lt;version&gt;6.0.43&lt;/version&gt;
&lt;/dependency&gt;
</code>
				</pre>

				<h2>4. Spring 설정파일 추가</h2>

				<p>Spring Configuation file을 생성하여 아래의 코드를 작성한다.</p>

				<p>
					<code>&gt;applicationContext.xml</code>
				</p>

				<pre>
<code>&lt;context:property-placeholder location="classpath*:application-properties.xml" /&gt;
    &lt;bean id="dataSource" class="BasicDataSource" 
        p:driverClassName="${database.driverClassName}"
        p:url="${database.url}" 
        p:username="${database.username" 
        p:password="${database.password" /&gt;
&lt;/context:property-placeholder&gt;
</code>
				</pre>

				<h3>4.1 context:property-placeholder</h3>

				<p>location에 지정된 경로의 property정보를 읽어 key-value형태로 가지고 있으라 설정.
					(location : classpath에 지정된 모든 application-properties.xml을 의미)</p>

				<h3>4.2 bean id="dataSource" class="BasicDataSource"</h3>

				<ul>
					<li>사용할 커넥션 풀을 이미 java에서 dataSource라는 이름의 인터페이스로 추상화 함.</li>
					<li>apache common의 dbcp 커넥션 풀의 구현체 클래스는 BasicDataSource.</li>
					<li>p 네임스페이스를 사용하면 아래와 같이 값을 받아올 수 있음.
						p:driverClassName="${database.driverClassName}"</li>
					<li>BasicDataSource 인스턴스에 setDriverClassName()에 이 키에 해당하는 값을
						전달 할 수 있음</li>
				</ul>
			</div>
			<!-- 하단 뒤로 돌아가기 버튼 -->
			<a class="back_button" href="/list/post.html"> _back </a>
			<!-- 댓글 -->
			<div id="disqus_thread"></div>
			<script type="text/javascript">
				/* * * CONFIGURATION VARIABLES * * */
				var disqus_shortname = 'probitanima11';

				/* * * DON'T EDIT BELOW THIS LINE * * */
				(function() {
					var dsq = document.createElement('script');
					dsq.type = 'text/javascript';
					dsq.async = true;
					dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
					(document.getElementsByTagName('head')[0] || document
							.getElementsByTagName('body')[0]).appendChild(dsq);
				})();
			</script>
			<noscript>
				Please enable JavaScript to view the <a
					href="https://disqus.com/?ref_noscript" rel="nofollow">comments
					powered by Disqus.</a>
			</noscript>
		</section>

		<footer>
			<p>
				<small>Hosted on GitHub Pages &mdash; Theme by <a
					href="https://github.com/orderedlist">orderedlist</a></small>
			</p>
		</footer>
	</div>
	<script src="/javascripts/scale.fix.js"></script>
</body>
</html>