<!doctype html>
<html>
<head>
<title>멘땅에 코딩</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="stylesheet" href="/stylesheets/styles.css">
<link rel="stylesheet" href="/stylesheets/pygment_trac.css">
</head>
<body>
	<div class="wrapper">
		<header></header>
		<section>
			<div class="sub_menu">
				<a id="menu_all" class="post_menu" href="#"> #ALL </a> <a
					id="menu_webserver" class="post_menu" href="#"> #Web Server </a> <a
					id="menu_webui" class="post_menu" href="#"> #Web UI </a> <a
					id="menu_android" class="post_menu" href="#"> #Android </a>
			</div>
			<ul id="post_list"></ul>
			<div id="content"></div>
		</section>
		<footer>
			<p>
				<small>Hosted on GitHub Pages &mdash; Theme by <a
					href="https://github.com/orderedlist">orderedlist</a></small>
			</p>
		</footer>
	</div>
	<script src="/javascripts/scale.fix.js"></script>
	<script src="/javascripts/utils.js"></script>
	<script>
	window.addEventListener('load', utils.ajax({ 
		  method: "get", 
		  url: "/common/header.html",
		  success: 
			function(req) {
			  var header = document.querySelector("header");
			  header.innerHTML = req.responseText;
			}  
	  }));
	</script>
	<script>
		var clickItemEvent = function(e) {
			utils.ajax({ 
			  method: "get", 
			  url: "/post/"+e.target.type+"/"+e.target.id+".html";
			  success: 
				function(req) {
				  req.responseText
				  var header = document.querySelector("#content");
					header.innerHTML = req.responseText;
				}  
		  });
		}

		var appendPostList = function(json, type) {
			var el = document.querySelector("#post_list");
			el.innerHTML = "";
			for (var i = 0; i < json.length; i++) {
				if (type === "menu_all" || type === json[i].type) {
					var newLi = document.createElement("li");
					newLi.setAttribute("class", "post_list_item");
					newLi.setAttribute("type", json[i].type);
					newLi.setAttribute("id", json[i].id);
					newLi.setAttribute("href", "#");
					el.appendChild(newLi);
				}
			}
			document.querySelector(".post_list_item").addEventListener("click",
					clickItemEvent);
		}
		
		var getPostList = function(type) {
			utils.ajax({ 
				  method: "get", 
				  url: "/post/post_list.json",
				  success: 
					function(req) {
					  var json = JSON.parse(req.responseText);
					  if (json !== "" || json !== undefined) {
						  appendPostList(JSON.parse(req.responseText), type);
					  }
					}  
			  });
		}
		
		var clickMenuEvent = function(e) {
			getPostList(e.target.id);
		}

		window.addEventListener('load', getPostList("menu_all"));
		document.querySelector("#menu_all").addEventListener("click", clickMenuEvent);
		document.querySelector("#menu_webserver").addEventListener("click", clickMenuEvent);
		document.querySelector("#menu_webui").addEventListener("click", clickMenuEvent);
		document.querySelector("#menu_android").addEventListener("click", clickMenuEvent);
	</script>
</body>
</html>