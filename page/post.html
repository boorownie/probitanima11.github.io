<!doctype html>
<html>
<head>
<title>멘땅에 코딩</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="stylesheet" href="/stylesheets/styles.css">
<link rel="stylesheet" href="/stylesheets/pygment_trac.css">
</head>
<body>
	<div class="wrapper">
		<header>
			<h1>멘땅에 코딩</h1>
			<p class="menu">
				<a href="/"> Home </a>
			</p>
			<p class="menu">
				<a href="/page/post.html"> Post </a>
			</p>
			<p class="menu">
				<a href="/page/dairy.html"> Dairy </a>
			</p>
			<p class="menu">
				<a href="https://github.com/probitanima11"> GitHub </a>
			</p>
		</header>
		<section>
			<div class="sub_menu">
				<a id="menu_all" class="post_menu" href="#"> #ALL </a> <a
					id="menu_webserver" class="post_menu" href="#"> #Web Server </a> <a
					id="menu_webui" class="post_menu" href="#"> #Web UI </a> <a
					id="menu_android" class="post_menu" href="#"> #Android </a>
			</div>
			<ul id="post_list">
			</ul>
		</section>
		<footer>
			<p>
				<small>Hosted on GitHub Pages &mdash; Theme by <a
					href="https://github.com/orderedlist">orderedlist</a></small>
			</p>
		</footer>
	</div>
	<script src="/javascripts/scale.fix.js"></script>
	<script>
		var appendPost = function(json, type) {
			var el = document.querySelector("#post_list");
			el.innerHTML = "";
			for (var i = 0; i < json.length; i++) {
				if(type === "menu_all" || type === json[i].type) {
					var newLi = document.createElement("li");
					newLi.setAttribure("href", "/post/"+json[i].type+"/"+json[i].id)
					newLi.innerHTML = "<p>"+json[i].name+"</p>";
					el.appendChild(newLi);
				}
			}
		}
		
		var ajax = function(o) {
			if (o.method === undefined || o.url === undefined
					|| o.success === undefined) {
				console.log("ajax Exception");
			}
			var req = new XMLHttpRequest();
			req.onreadystatechange = function() {
				if (req.readyState == 4) {
					if (req.status == 200) {
						o.success(req);
					}
				}
			};
			req.open(o.method, o.url, true);
			req.send();
		}

		var clickEvent = function(e) {
			ajax({
				method:"get",
				url:"/post/post_list.json",
				success:
				  function(req) {
					appendPost(JSON.parse(req.responseText), e.target.id);
			      }	
			});

		}

		document.querySelector("#menu_all").addEventListener("click",
				clickEvent);
		document.querySelector("#menu_webserver").addEventListener("click",
				clickEvent);
		document.querySelector("#menu_webui").addEventListener("click",
				clickEvent);
		document.querySelector("#menu_android").addEventListener("click",
				clickEvent);
	</script>
</body>
</html>