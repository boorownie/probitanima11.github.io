<!doctype html>
<html>
<head>
<title>맨땅에 코딩</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="stylesheet" href="/stylesheets/styles.css">
<link rel="stylesheet" href="/stylesheets/pygment_trac.css">
</head>
<body>
	<div class="wrapper">
		<header>
			<h1>맨땅에 코딩</h1>
			<p class="menu">
				<a href="/"> Home </a>
			</p>
			<p class="menu">
				<a href="#"> Post </a>
			</p>
			<p class="menu">
				<a href="/page/dairy.html"> Dairy </a>
			</p>
			<p class="menu">
				<a href="https://github.com/probitanima11"> GitHub </a>
			</p>
		</header>
		<section>
			<div class="sub_menu">
				<a class="tag_all" href="#"> #all </a>
				<span>&nbsp; &nbsp; </span>
				<a class="tag_webserver" href="#"> #webserver </a>
				<span>&nbsp; &nbsp; </span>
				<a class="tag_webui" href="#"> #webui </a>
				<span>&nbsp; &nbsp; </span>
				<a class="tag_android" href="#"> #android </a>
				<span>&nbsp; &nbsp; </span>
				<a class="tag_java" href="#"> #java </a>
				<span>&nbsp; &nbsp; </span>
				<a class="tag_spring" href="#"> #spring </a>
			</div>
			<ul id="post_list"></ul>
		</section>
		<footer>
			<p>
				<small>Hosted on GitHub Pages &mdash; Theme by <a
					href="https://github.com/orderedlist">orderedlist</a></small>
			</p>
		</footer>
		<script src="/javascripts/scale.fix.js"></script>
		<script src="/javascripts/utils.js"></script>
		<script src="/javascripts/post.js"></script>
		<script>
			var appendPostList = function(postList) {
				var el = document.querySelector("#post_list");
				el.innerHTML = "";
				for(var i=0; i<postList.length; i++) {
					var aEl = document.createElement("a");
					aEl.setAttribute("href", "/post/" + postList[i].idx);
						var liEl = document.createElement("li");
							var divEl = document.createElement("div");
							divEl.setAttribute("class", "post_card");
								var divTagEl = postList[i].getTagDivElement();
								divEl.appendChild(divTagEl);
								var h3El = document.createElement("h3");
								h3El.setAttribute("class", "post_name");
								h3El.innerHTML = "_" + postList[i].name;
								divEl.appendChild(h3El);
								if (postList[i].desc !== undefined) {
									var pEl = document.createElement("p");
									pEl.setAttribute("class", "post_desc");
									pEl.innerHTML = postList[i].desc;
									divEl.appendChild(pEl);
								}
								var spanEl = document.createElement("span");
								spanEl.setAttribute("class", "post_date");
								spanEl.innerHTML = postList[i].date;
							divEl.appendChild(spanEl);
						liEl.appendChild(divEl);
					aEl.appendChild(liEl);
					el.appendChild(aEl);
				}
			}

			var getPostList = function(type) {
				utils.ajax({
					method : "get",
					url : "/post/post_list.json",
					success : function(req) {
						var jsonArray = JSON.parse(req.responseText);
						if (jsonArray === "" || jsonArray === undefined) {
							return;
						}
						
						var list = new Array();
						for(var i=0; i<jsonArray.length; i++) {
							var postObj = new Post(jsonArray[i]);
							if(type == "all" || postObj.checkIncludeTag(type)) {
								list.push(postObj);
							}
						}
						appendPostList(list);
					}
				});
			}
			
			var clickMenuEvent = function(e) {
				var type = e.target.getAttribute("class").split("_")[1];
				getPostList(type);
			}

			window.addEventListener('load', getPostList("all"));
			var tagMenus = document.querySelectorAll(".sub_menu > a");
			for(var i=0; i<tagMenus.length; i++) {
				tagMenus[i].addEventListener("click", clickMenuEvent);
			}
		</script>
</body>
</html>